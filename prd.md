好的，以下是更为详细的PRD（产品需求文档），包括了功能的具体描述、界面设计思路、技术细节、流程图、用户场景等：

---

# 产品需求文档（PRD）

## 产品概述

**番茄待办提醒** 是一款面向MacOS平台的桌面应用程序，结合了番茄工作法和任务管理功能，旨在帮助用户高效管理日常任务。通过番茄钟计时法和待办事项清单，用户可以更好地分配时间，提升专注度和工作效率。

### 核心功能

1. **用户管理**

   * 用户可以通过本地账户系统进行注册、登录、修改个人信息（可选）。
   * 支持本地数据存储，不强制要求注册。
   * 用户信息可以包括姓名、电子邮件、密码等字段。
   * 支持用户在不同设备上同步任务（可选，后续版本）。

2. **任务管理**

   * **任务创建**：用户可以通过界面添加新的待办任务。

     * 必须字段：任务标题、截止时间。
     * 可选字段：任务描述、任务优先级、标签（如工作、学习、个人等）。
   * **任务编辑和删除**：用户可以随时修改或删除已有任务。
   * **任务分类管理**：

     * 允许用户为每个任务分配类别（例如：工作、学习、生活等）。
     * 可以为不同类别的任务选择不同的颜色标识。
   * **任务状态管理**：

     * 支持设置任务状态为“待办”、“进行中”、“已完成”。
     * 任务完成后，用户可以标记为已完成，任务状态颜色会自动变更。

3. **番茄钟功能**

   * **标准番茄钟**：每次工作25分钟后自动提醒用户进行5分钟休息，之后开始下一个番茄钟。
   * **自定义番茄钟时间**：用户可以根据需求调整番茄钟的工作时间（如20分钟、40分钟等）及休息时间。
   * **倒计时**：每个番茄钟计时过程中，主界面显示剩余时间，直到倒计时结束。
   * **番茄钟提醒**：

     * 工作时间结束时弹出通知，并有提醒音效。
     * 休息时间结束时也会弹出通知。
     * 可以通过设置通知音效或震动模式提醒用户。
   * **记录与历史**：每个番茄钟结束后，记录工作时长和任务关联情况，供用户查看统计。

4. **提醒和通知功能**

   * **任务提醒**：

     * 用户可以为每个任务设置提醒时间（如任务开始前10分钟）。
     * 支持桌面通知以及声音提醒（可自定义提醒音）。
   * **番茄钟结束提醒**：

     * 每次番茄钟结束后，自动通知用户进入休息时间。
     * 休息时间结束后，提醒用户进入下一轮番茄钟工作。

5. **统计和报告功能**

   * **每日总结**：

     * 提供用户每日番茄钟使用统计：完成的番茄钟数量、完成的任务数量等。
     * 每日任务完成情况报告：展示完成的任务、进行中的任务等。
   * **周/月总结**：

     * 提供周/月的工作效率总结，显示用户完成的任务数、使用的番茄钟次数等。
   * **工作效率分析**：

     * 提供分析图表，展示用户的工作/休息时间分布，帮助用户发现高效时段。

6. **界面设计**

   * **任务列表界面**：

     * 主界面展示待办任务列表，包括任务标题、截止时间、优先级和状态。
     * 任务项支持点击展开，查看任务详情。
   * **番茄钟计时界面**：

     * 显示番茄钟计时的倒计时，用户可以启动、暂停、跳过番茄钟。
     * 提供按钮切换到任务列表界面或查看任务详情。
   * **任务编辑界面**：

     * 用户可以在此界面修改任务的标题、描述、优先级、截止时间等。
   * **统计界面**：

     * 提供每日、每周、每月的任务完成情况、番茄钟数量的统计报告。
     * 统计图表清晰展示用户工作效率。

7. **自定义设置**

   * **番茄钟设置**：

     * 用户可以自定义工作时间和休息时间，默认25分钟工作、5分钟休息。
   * **提醒设置**：

     * 用户可以为每个任务设置不同的提醒时间，如任务开始前30分钟、1小时等。
   * **界面主题**：

     * 提供浅色模式和深色模式切换。
     * 用户可以根据个人偏好调整界面配色方案。
   * **音效设置**：

     * 提供不同的提醒音效，用户可以选择开启或关闭音效。
     * 提供震动提醒（可选）。

### 技术架构

1. **平台要求**：

   * **操作系统**：MacOS 10.14及以上版本（也可扩展到Windows和Linux）。
   * **应用程序架构**：基于Electron框架 + React/Vue前端开发，无需Xcode即可运行。
   * **开发语言**：JavaScript/TypeScript（前端和主进程）。
   * **数据库**：使用MySQL数据库（本地开发：root/1234）保存任务数据和番茄钟记录。

2. **运行方式**：

   * **开发模式**：使用`npm start`或`yarn start`直接运行应用。
   * **打包部署**：使用electron-builder打包成.app文件（MacOS）或.exe文件（Windows）。
   * **无需编译**：不需要Xcode环境，只需Node.js即可运行。

3. **技术栈选择**：

   * **前端框架**：React + Ant Design或Vue + Element UI（现代化UI组件库）。
   * **状态管理**：Redux或Zustand（轻量级状态管理）。
   * **数据存储**：MySQL数据库 + mysql2库（Node.js MySQL客户端）。
   * **打包工具**：electron-builder（支持多平台打包）。

4. **网络**（可选）：

   * **数据同步**：支持云端同步服务（如Firebase、Supabase等），实现跨设备同步任务和番茄钟记录。
   * **离线支持**：即使没有网络连接，应用也能够正常工作。

5. **通知和提醒**：

   * 使用Electron的**Notification API**处理通知和提醒。
   * 使用**node-notifier**库增强跨平台通知功能。
   * 提供系统通知、桌面提醒、声音提醒等功能。

6. **开发环境搭建**：

   * **必需工具**：Node.js（14.x或以上版本）、npm或yarn。
   * **启动命令**：
     ```bash
     npm install        # 安装依赖
     npm start         # 启动开发模式
     npm run build     # 打包应用
     ```
   * **目录结构**：
     ```
     project/
     ├── src/
     │   ├── main/          # Electron主进程代码
     │   ├── renderer/      # 前端页面代码
     │   └── shared/        # 共享代码和工具
     ├── public/            # 静态资源
     ├── package.json       # 项目配置
     └── electron-builder.json  # 打包配置
     ```

### 用户流程

1. **任务创建流程**：

   * 用户打开应用，点击“添加任务”按钮。
   * 输入任务标题、描述、优先级和截止时间，点击保存。
   * 任务显示在任务列表中。

2. **番茄钟启动流程**：

   * 用户选择一个任务，点击开始番茄钟按钮。
   * 番茄钟开始计时，显示剩余时间。
   * 计时结束后，提示用户进入休息时间。

3. **任务完成流程**：

   * 用户完成任务后，标记任务为“已完成”。
   * 任务状态变更，用户可以查看已完成的任务列表。

4. **统计查看流程**：

   * 用户进入统计页面，查看每周/月的任务完成情况、番茄钟数量等。

### 设计原型与界面

* **主界面：** 展示任务列表，用户可以查看、编辑、删除任务。
* **任务编辑界面：** 用户可以编辑任务的所有信息，如标题、描述、优先级、截止时间。
* **番茄钟界面：** 显示番茄钟倒计时，提供暂停、跳过和设置按钮。
* **统计页面：** 提供周/月的任务和番茄钟统计，使用图表显示效率数据。

### 技术优势

1. **简单易用**：
   * 无需安装Xcode，只需Node.js环境即可开发和运行。
   * 使用`npm start`一键启动，开发体验友好。
   * 前端技术栈（HTML/CSS/JavaScript）学习曲线平缓。

2. **跨平台支持**：
   * 基于Electron的应用天然支持MacOS、Windows和Linux。
   * 一次开发，多平台运行，无需为不同平台单独开发。

3. **丰富的生态系统**：
   * npm拥有海量的开源库和组件可供使用。
   * 社区活跃，问题解决方案丰富。

### 未来版本功能

1. **移动端配套应用**：

   * 开发配套的Web应用或移动端应用（React Native），实现跨设备同步。
   * 用户可以在Mac、手机和平板之间同步任务和番茄钟记录。

2. **语音助手集成**：

   * 集成语音识别功能，用户可以通过语音命令添加任务、开始番茄钟等。
   * 支持自然语言处理，如"明天下午三点提醒我开会"。

3. **与其他工具集成**：

   * 与日历应用（Google Calendar、Outlook）集成，支持自动导入待办任务。
   * 与Slack、Notion、Trello等工具集成，实现任务同步。
   * 支持导入/导出功能（CSV、JSON格式）。

4. **AI智能助手**：

   * 基于任务历史数据，智能推荐最佳工作时间段。
   * 自动分析工作效率，提供个性化建议。

### 风险评估与挑战

1. **界面简洁性与功能复杂度**：
   * 需要平衡功能丰富和界面简洁性，避免用户迷失在复杂的设置中。
   * 建议：采用渐进式功能展示，初级用户看到简化界面，高级功能通过设置开启。

2. **性能问题**：
   * 应用需要处理大量任务和番茄钟数据，可能存在性能瓶颈。
   * Electron应用内存占用相对较高。
   * 建议：使用虚拟列表优化大量任务显示，合理使用缓存和懒加载。

3. **应用体积**：
   * Electron打包后的应用体积较大（通常50MB+）。
   * 建议：使用electron-builder的压缩选项，移除不必要的依赖。

4. **安全性**：
   * 需要注意Electron的安全最佳实践，避免XSS和代码注入攻击。
   * 建议：启用contextIsolation，使用preload脚本，禁用不必要的Node.js集成。

### 快速开始指南

**前置要求**：
- 安装Node.js（推荐v16或更高版本）
- 安装npm或yarn包管理器

**开发流程**：

1. **初始化项目**：
   ```bash
   # 克隆项目或创建新项目
   npx create-electron-app my-pomodoro-app
   cd my-pomodoro-app
   ```

2. **安装依赖**：
   ```bash
   npm install
   # 安装额外需要的库
   npm install electron-store
   npm install node-notifier
   npm install react react-dom  # 如果使用React
   ```

3. **启动开发模式**：
   ```bash
   npm start
   # 应用会自动打开窗口，支持热重载
   ```

4. **打包应用**：
   ```bash
   npm run build        # 构建前端代码
   npm run package      # 打包Electron应用
   # 打包后的文件在 dist/ 目录下
   ```

**推荐开发工具**：
- VS Code（配合ESLint和Prettier插件）
- Chrome DevTools（用于调试）
- React Developer Tools（如果使用React）

---

### 总结

这份PRD采用了**Electron + React/Vue**技术栈，相比原来的Swift/Xcode方案具有以下优势：

✅ **无需Xcode**：只需Node.js即可开发和运行  
✅ **快速启动**：`npm start`一键启动，开发体验流畅  
✅ **跨平台**：天然支持MacOS、Windows和Linux  
✅ **技术栈现代**：使用Web技术，学习资源丰富  
✅ **生态丰富**：npm提供海量开源库和组件  

这样你就可以轻松开发和运行这个番茄待办应用了！如果有其他需求或需要进一步扩展，可以随时告诉我。

