# 🍅 番茄待办提醒 - 使用说明

## 🚀 快速开始

### 1. 运行自动化测试（推荐）
```bash
npm test
# 或
./test-all.sh
```

这会自动检查：
- ✅ Node.js和npm环境
- ✅ MySQL服务状态
- ✅ 数据库连接
- ✅ 项目文件完整性
- ✅ 依赖安装情况

### 2. 启动应用
```bash
npm start
```

---

## 🧪 测试命令

```bash
npm test              # 环境检查
npm run db:test       # 数据库功能测试
npm run test:all      # 完整测试（环境+数据库）
```

---

## 📋 常用命令

| 命令 | 说明 |
|------|------|
| `npm install` | 安装依赖 |
| `npm start` | 启动应用 |
| `npm run db:init` | 初始化数据库 |
| `npm run db:seed` | 添加示例数据 |
| `npm run db:test` | 测试数据库 |
| `npm test` | 运行自动化测试 |
| `npm run build` | 构建生产版本 |
| `npm run package` | 打包应用 |

---

## ⚠️ 常见问题

### 问题1：数据库连接失败

**错误信息：** `ECONNREFUSED`

**解决方案：**
```bash
# 1. 运行自动化测试诊断
npm test

# 2. 检查MySQL是否运行
brew services list | grep mysql

# 3. 启动MySQL
brew services start mysql

# 4. 验证连接
mysql -u root -p1234 -e "SELECT 1"
```

### 问题2：任务创建失败

**解决方案：**
1. 打开浏览器控制台（F12）查看错误
2. 检查数据库连接：`npm run db:test`
3. 刷新页面（Cmd+Shift+R强制刷新）

### 问题3：端口被占用

**错误信息：** `Port 3000 is already in use`

**解决方案：**
```bash
# 查找占用端口的进程
lsof -i :3000

# 结束进程
kill -9 [PID]
```

---

## 🎯 功能使用

### 创建任务
1. 点击右上角"新建任务"按钮
2. 填写任务信息（标题必填）
3. 选择分类、优先级、截止时间等
4. 点击"保存"

### 使用番茄钟
1. 切换到"番茄钟"页面
2. 可选：选择一个任务关联
3. 设置工作时长和休息时长
4. 点击"开始专注"

### 查看统计
1. 切换到"统计报告"页面
2. 查看任务完成情况
3. 查看番茄钟统计
4. 分析工作效率

---

## 🔧 数据库配置

默认配置：
```javascript
{
  host: '127.0.0.1',  // IPv4地址（避免IPv6问题）
  port: 3306,
  user: 'root',
  password: '1234',
  database: 'pomodoro_db'
}
```

修改配置：编辑 `src/database/config.js`

---

## 📊 数据库结构

- **users** - 用户表
- **categories** - 分类表（工作、学习、生活、健康、其他）
- **tasks** - 任务表
- **pomodoro_sessions** - 番茄钟记录表

---

## 🎨 UI设计

采用 **Apple + HarmonyOS** 设计风格：
- 圆润的卡片设计（20px圆角）
- 渐变色彩系统
- 毛玻璃效果
- 流畅的动画过渡
- 清晰的信息层次

---

## 💡 开发提示

### 调试模式
开发模式下会在浏览器控制台显示：
- 📝 表单提交的数据
- 📤 发送到后端的数据  
- 📥 后端返回的结果
- ❌ 错误详情

### 热重载
修改代码后自动刷新，无需重启

### DevTools
应用会自动打开开发者工具

---

## 📦 打包部署

```bash
# 1. 构建React应用
npm run build

# 2. 打包Electron应用
npm run package

# 3. 查看打包结果
ls dist/
```

---

## 🆘 获取帮助

遇到问题？
1. 运行 `npm test` 查看诊断信息
2. 查看 `测试报告.md`
3. 查看 `SETUP.md` 详细安装指南
4. 检查浏览器控制台错误

---

## ✨ 技术栈

- **前端：** React 18 + Ant Design 5
- **桌面：** Electron 27
- **数据库：** MySQL 8.0 + mysql2
- **Node.js：** v16+

---

**享受高效的番茄工作法！** 🍅✨

